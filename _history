{"entries":[{"timestamp":1764359218388,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":84,"diffs":[[1,""]]},{"start1":1,"length1":911,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":258,"length1":45,"diffs":[[1,"    \"languageRestriction\": \"javascript-only\",\n    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1764363969025,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":492,"length1":9,"diffs":[[1,""]]}]}]},{"timestamp":1764443771125,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":492,"length1":13,"diffs":[[1,"        \n"]]}]}]},{"timestamp":1764443772820,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":34,"length1":28,"diffs":[[1,"const DEAD_RADIUS = 40 * 40\n"]]},{"start1":473,"length1":21,"diffs":[[1,""]]},{"start1":492,"length1":0,"diffs":[[1,"        cons\n"]]}]}]},{"timestamp":1764444084207,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":389,"length1":2,"diffs":[[1,""]]}]}]},{"timestamp":1764452424820,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":389,"length1":47,"diffs":[[1,""]]},{"start1":390,"length1":153,"diffs":[[1,""]]}]}]},{"timestamp":1764452425815,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":62,"length1":23,"diffs":[[1,""]]},{"start1":84,"length1":22,"diffs":[[1,""]]},{"start1":389,"length1":0,"diffs":[[1,"    // délka vektoru\n"]]},{"start1":436,"length1":106,"diffs":[[1,"\n    // přepočet na 0–100 (oříznutí pro jistotu)\n    if (r > MAX_RADIUS) {\n        r = MAX_RADIUS\n    }\n    strength = pins.map(r, 0, MAX_RADIUS, 0, 100)\n\n"]]},{"start1":675,"length1":5,"diffs":[[1,"    console.log(deg)\n"]]}]}]},{"timestamp":1764452790805,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":130,"length1":1,"diffs":[[1,""]]}]}]},{"timestamp":1764509980480,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":129,"length1":2,"diffs":[[1,""]]},{"start1":130,"length1":0,"diffs":[[1,"\n"]]}]}]},{"timestamp":1764510001633,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":129,"length1":118,"diffs":[[1,"c\n"]]},{"start1":245,"length1":402,"diffs":[[1,""]]}]}]},{"timestamp":1764510595664,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":476,"length1":289,"diffs":[[1,"    buttons.c = pins.digitalReadPin(DigitalPin.P515 === 1\n    buttons.d = pins.digitalReadPin(DigitalPin.P5) === 1\n    buttons.e = pins.digitalReadPin(DigitalPin.P5) === 1\n    buttons.f = pins.digitalReadPin(DigitalPin.P5) === 1\n    buttons.p = pins.digitalReadPin(DigitalPin.P5) === 1\n"]]},{"start1":1217,"length1":1,"diffs":[[1,"    \n"]]},{"start1":1676,"length1":289,"diffs":[[1,""]]}]}]},{"timestamp":1764511182913,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":361,"length1":404,"diffs":[[1,"    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 1\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 1\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 1\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 1\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 1\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 1\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 1\n"]]},{"start1":850,"length1":0,"diffs":[[1,"    if (r2 < DEAD_RADIUS) {\n        basic.showString(\"-\", 0)\n        basic.pause(20)\n        return\n    }\n"]]},{"start1":1676,"length1":438,"diffs":[[1,"    if (buttons.p) basic.showString(\"P\")\n    if (buttons.f) basic.showString(\"F\")\n    if (buttons.e) basic.showString(\"E\")\n    if (buttons.d) basic.showString(\"D\")\n    if (buttons.c) basic.showString(\"C\")\n    if (buttons.b) basic.showString(\"B\")\n    if (buttons.a) basic.showString(\"A\")\n"]]}]}]},{"timestamp":1764511463944,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1114,"length1":70,"diffs":[[1,"\n"]]}]}]},{"timestamp":1764512078782,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1114,"length1":1,"diffs":[[1,"basic.showLeds(`\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n`)\n"]]}]}]},{"timestamp":1764512090212,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":818,"length1":0,"diffs":[[1,"\n"]]},{"start1":851,"length1":120,"diffs":[[1,"    let r = Math.sqrt(r2)\n    strength = pins.map(r > MAX_RADIUS ? MAX_RADIUS : r, 0, MAX_RADIUS, 0, 100)\n    console.log(strength)\n    let deg = Math.atan2(dy, dx) * 180 / Math.PI\n"]]},{"start1":1067,"length1":245,"diffs":[[1,"    \n    if (dir < 0) {\n        dir += 8\n"]]},{"start1":1115,"length1":170,"diffs":[[1,""]]}]}]},{"timestamp":1764512662504,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":62,"length1":23,"diffs":[[1,"const MAX_RADIUS = 502\n"]]},{"start1":883,"length1":36,"diffs":[[1,"    if (rad < 0) {\n        rad += 2 * Math.PI\n    }\n"]]},{"start1":936,"length1":51,"diffs":[[1,"    let deg = rad * 180 / Math.PI\n    let dir = Math.round(deg / 45)\n"]]},{"start1":1033,"length1":0,"diffs":[[1,"\n"]]},{"start1":1151,"length1":100,"diffs":[[1,"    // mapování projekce na 0–100\n    if (projected > MAX_RADIUS) {\n        projected = MAX_RADIUS\n    }\n\n    let strength = pins.map(projected, 0, MAX_RADIUS, 0, 100)\n\n    strength = pins.map(r > MAX_RADIUS ? MAX_RADIUS : r, 0, MAX_RADIUS, 0, 100)\n"]]}]}]},{"timestamp":1764513042953,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":999,"length1":135,"diffs":[[1,"    let projected = Math.sqrt(r2) * Math.cos(rad - (dir * 45 * Math.PI / 180))\n    if (projected < 0) projected = 0\n"]]},{"start1":1116,"length1":0,"diffs":[[1,"    let strength = pins.map(projected > MAX_RADIUS ? MAX_RADIUS : projected, 0, MAX_RADIUS, 0, 100)\n    console.log(strength)\n\n"]]}]}]},{"timestamp":1764513505555,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":62,"length1":23,"diffs":[[1,"const MAX_RADIUS = 730\n"]]},{"start1":999,"length1":179,"diffs":[[1,"    strength = pins.map(Math.sqrt(r2) > MAX_RADIUS ? MAX_RADIUS : Math.sqrt(r2), 0, MAX_RADIUS, 0, 100)\n    console.log(Math.sqrt(r2))\n"]]}]}]},{"timestamp":1764514039075,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1056,"length1":109,"diffs":[[1,"    strength = pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100)\n"]]}]}]},{"timestamp":1764514230641,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1191,"length1":5,"diffs":[[1,"\n"]]}]}]},{"timestamp":1764517232381,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1191,"length1":8,"diffs":[[1,"    \n"]]}]}]},{"timestamp":1764517243582,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1191,"length1":9,"diffs":[[1,"    ima\n"]]}]}]},{"timestamp":1764517265949,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":199,"length1":42,"diffs":[[1,"        \"README.md\"\n"]]}]},{"type":"added","filename":"letters.ts","value":"\n/**\n* Use this file to define custom functions and blocks.\n* Read more at https://makecode.microbit.org/blocks/custom\n*/\n\nenum MyEnum {\n    //% block=\"one\"\n    One,\n    //% block=\"two\"\n    Two\n}\n\n/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\"\nnamespace custom {\n    /**\n     * TODO: describe your function here\n     * @param n describe parameter here, eg: 5\n     * @param s describe parameter here, eg: \"Hello\"\n     * @param e describe parameter here\n     */\n    //% block\n    export function foo(n: number, s: string, e: MyEnum): void {\n        // Add code here\n    }\n\n    /**\n     * TODO: describe your function here\n     * @param value describe value here, eg: 5\n     */\n    //% block\n    export function fib(value: number): number {\n        return value <= 1 ? value : fib(value -1) + fib(value - 2);\n    }\n}\n"}]},{"timestamp":1764517864732,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"letters.ts","patch":[{"start1":1,"length1":186,"diffs":[[1,"/**\n* Use this file to define custom functions and blocks.\n* Read more at https://makecode.microbit.org/blocks/custom\n*/\n"]]},{"start1":123,"length1":1211,"diffs":[[1,"enum MyEnum {\n    //% block=\"one\"\n    One,\n    //% block=\"two\"\n    Two\n}\n\n/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\"\nnamespace custom {\n    /**\n     * TODO: describe your function here\n     * @param n describe parameter here, eg: 5\n     * @param s describe parameter here, eg: \"Hello\"\n     * @param e describe parameter here\n     */\n    //% block\n    export function foo(n: number, s: string, e: MyEnum): void {\n        // Add code here\n"]]},{"start1":586,"length1":110,"diffs":[[1,"\n    /**\n     * TODO: describe your function here\n     * @param value describe value here, eg: 5\n     */\n    //% block\n    export function fib(value: number): number {\n        return value <= 1 ? value : fib(value -1) + fib(value - 2);\n    }\n}\n"]]}]}]},{"timestamp":1764518382315,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"letters.ts","patch":[{"start1":746,"length1":149,"diffs":[[1,". # # # .\n# . . . .\n# . . . .\n# . . . .\n. # # # .\n`)\n"]]},{"start1":878,"length1":149,"diffs":[[1,"# # # . .\n# . . # .\n# . . # .\n# . . # .\n# # # . .\n`)\n"]]},{"start1":1010,"length1":149,"diffs":[[1,"# # # # #\n# . . . .\n# # # # .\n# . . . .\n# # # # #\n`)\n"]]},{"start1":1142,"length1":149,"diffs":[[1,"# # # # #\n# . . . .\n# # # # .\n# . . . .\n# . . . .\n`)\n"]]},{"start1":1274,"length1":149,"diffs":[[1,"            # # # # .\n            # . . . #\n            # # # # .\n            # . . . .\n            # . . . .\n            `)\n"]]},{"start1":1405,"length1":142,"diffs":[[1,"    return images.createImage(`\n    . # . # .\n    # # # # #\n    # # . # #\n    # # # # #\n    # # . # #\n    `)\n"]]}]}]},{"timestamp":1764518943309,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":112,"diffs":[[1,"const center = { x: 502, y: 512 }\n"]]},{"start1":85,"length1":21,"diffs":[[1,"let arrow: ArrowNames\n"]]},{"start1":920,"length1":47,"diffs":[[1,"    let dir = Math.round(rad * 180 / Math.PI / 45)\n"]]},{"start1":998,"length1":63,"diffs":[[1,""]]},{"start1":1191,"length1":0,"diffs":[[1,"        \n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n"]]},{"start1":1624,"length1":28,"diffs":[[1,"    basic.showArrow(arrow, 0)\n"]]}]},{"type":"edited","filename":"letters.ts","patch":[{"start1":1862,"length1":69,"diffs":[[1,"    if (arrNo >= 0 && arrNo <= 9) result = images.arrowImage(arrNo);\n"]]}]}]},{"timestamp":1764519934573,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1686,"length1":13,"diffs":[[1,"    if (r2 < DEAD_RADIUS) {\n"]]}]}]},{"timestamp":1764519937128,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1301,"length1":0,"diffs":[[1,"    console.log(strength)\n"]]},{"start1":1686,"length1":45,"diffs":[[1,"    if (/) {\n"]]}]}]},{"timestamp":1764520105252,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":206,"length1":6,"diffs":[[1,""]]}]},{"type":"edited","filename":"letters.ts","patch":[{"start1":122,"length1":18,"diffs":[[1,""]]},{"start1":158,"length1":0,"diffs":[[1,"        . . . . .\n"]]},{"start1":1807,"length1":19,"diffs":[[1,""]]}]}]},{"timestamp":1764520704799,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":163,"length1":531,"diffs":[[1,""]]},{"start1":206,"length1":1,"diffs":[[1,"let x\n"]]},{"start1":230,"length1":98,"diffs":[[1,"    a: false,\n    b: false,\n    c: false,\n    d: false,\n    e: false,\n    f: false,\n    p: false,\n"]]},{"start1":444,"length1":150,"diffs":[[1,"    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 0\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 0\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 0\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 0\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 0\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 0\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 0\n"]]}]}]},{"timestamp":1764521213178,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":453,"length1":19,"diffs":[[1,"const state = [\n"]]},{"start1":694,"length1":121,"diffs":[[1,""]]},{"start1":738,"length1":0,"diffs":[[1,"const buttons = {\n    A: false,\n    B: false,\n    C: false,\n    D: false,\n    E: false,\n    F: false,\n    P: false,\n}\n\n"]]},{"start1":1017,"length1":273,"diffs":[[1,"        const m = PINSmap[i];\n        (buttons as any)[m.key] = pins.digitalReadPin(m.pin) === 0\n"]]},{"start1":1608,"length1":15,"diffs":[[1,"\n    if (buttons.p) basic.showString(\"P\"); else\n    if (buttons.f) basic.showString(\"F\"); else\n    if (buttons.e) basic.showString(\"E\"); else\n    if (buttons.d) basic.showString(\"D\"); else\n    if (buttons.c) basic.showString(\"C\"); else\n    if (buttons.b) basic.showString(\"B\"); else\n    if (buttons.a) basic.showString(\"A\"); else\n"]]}]}]},{"timestamp":1764521812000,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1789,"length1":96,"diffs":[[1,"    for (let )\n"]]}]}]},{"timestamp":1764522429718,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1821,"length1":63,"diffs":[[1,"        if (btn.value) basic.showLeds(getLetter(btn.key))\n"]]}]}]},{"timestamp":1764522432826,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1821,"length1":58,"diffs":[[1,"        if (btn.value) basic.showLeds(getLetter(btn.key) as s)\n"]]}]}]},{"timestamp":1764522442870,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1821,"length1":43,"diffs":[[1,"        if (btn.value) basic.showLeds(getLetter(btn.key))\n"]]}]}]},{"timestamp":1764523478694,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1821,"length1":42,"diffs":[[1,"        if (btn.value) getLetter(btn.key))\n"]]}]}]},{"timestamp":1764523479687,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":112,"length1":0,"diffs":[[1,"const DEAD_RADIUS = 20 * 20\n"]]},{"start1":163,"length1":37,"diffs":[[1,"const PINSmap = [\n"]]},{"start1":453,"length1":43,"diffs":[[1,"const btnState = [\n"]]},{"start1":697,"length1":40,"diffs":[[1,"const joyState = [\n"]]},{"start1":1821,"length1":57,"diffs":[[1,"        if (btn.value) getLetter(btn.key)\n"]]},{"start1":1869,"length1":74,"diffs":[[1,"    if (strength < 3 /*r2 < DEAD_RADIUS*/) {\n"]]},{"start1":1948,"length1":0,"diffs":[[1,"         basic.pause(20)\n         return\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":220,"length1":41,"diffs":[[1,"        \"letters.ts\"\n"]]}]},{"type":"edited","filename":"letters.ts","patch":[{"start1":1,"length1":39,"diffs":[[1,"function getLetter(ch: string): Image {\n"]]}]},{"type":"added","filename":"types.ts","value":"type ButtonKey = \"A\" | \"B\" | \"C\" | \"D\" | \"E\" | \"F\" | \"P\"\n\ntype PinMapItem = {\n    key: ButtonKey\n    pin: DigitalPin\n}\n\ntype ButtonStateItem = {\n    key: ButtonKey\n    value: boolean\n}\n\ntype JoyKey = \"dirArrow\" | \"strength\" | \"deg\"\n\ntype JoyStateItem = {\n    key: JoyKey\n    value: number\n}"}]},{"timestamp":1764524059777,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":712,"length1":87,"diffs":[[1,"const joyState: Array<JoyStateItem> = [\n    { key: \"dirArrow\", value: 0 },\n    { key: \"strength\", value: 0 },\n    { key: \"deg\", value: 90 }\n"]]},{"start1":1796,"length1":14,"diffs":[[1,""]]},{"start1":1797,"length1":121,"diffs":[[1,"    basic.showArrow(dir, 0)\n"]]},{"start1":1857,"length1":98,"diffs":[[1,"        if (btn.value) getImage(btn.key).showImage(0, 0)\n"]]},{"start1":1920,"length1":33,"diffs":[[1,""]]},{"start1":1925,"length1":0,"diffs":[[1,"    if (strength < 3 && !btnState.some((key, index) => key.value)) {\n         basic.showString(\"-\", 0)\n    }\n\n"]]}]},{"type":"edited","filename":"types.ts","patch":[{"start1":58,"length1":28,"diffs":[[1,"type PinMapItem = {\n"]]},{"start1":120,"length1":33,"diffs":[[1,"type ButtonStateItem = {\n"]]},{"start1":186,"length1":96,"diffs":[[1,"type JoyKey = \"dirArrow\" | \"strength\" | \"deg\"\n\ntype JoyStateItem = {\n    key: JoyKey\n    value: number\n"]]}]}]},{"timestamp":1764524658321,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":746,"length1":48,"diffs":[[1,"    \"dirArrow\": 0,\n    \"strength\": 0,\n    \"deg\" 90 }\n]\nlet dir: number = 0;\nlet strength: number;\n"]]},{"start1":1439,"length1":51,"diffs":[[1,"    dir = Math.round(rad * 180 / Math.PI / 45)\n"]]},{"start1":1513,"length1":2,"diffs":[[1,"    dir = [2, 1, 0, 7, 6, 5, 4, 3][dir]; //remap to ArrowNames\n\n"]]},{"start1":1634,"length1":247,"diffs":[[1,"    strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n    joyState.\n"]]},{"start1":1802,"length1":94,"diffs":[[1,"    if (strength > 3) {\n        imageToShow = getImage(dir.toString())\n"]]},{"start1":2053,"length1":23,"diffs":[[1,""]]}]},{"type":"edited","filename":"types.ts","patch":[{"start1":232,"length1":60,"diffs":[[1,"    \"dirArrow\": number,\n    \"strength\": number,\n    \"deg\": number\n"]]}]}]},{"timestamp":1764525239853,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":780,"length1":11,"diffs":[[1,"    deg: 90\n"]]}]}]},{"timestamp":1764525631376,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1721,"length1":121,"diffs":[[1,"    joyState.deg = Math.round(rad * 180 / Math.PI)\n"]]}]}]},{"timestamp":1764526133007,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":907,"length1":142,"diffs":[[1,"    for (let i = 0; i < PINSmap.length; i++) {\n        const m = PINSmap[i]\n        const pressed = pins.digitalReadPin(m.pin) === 0\n"]]},{"start1":1041,"length1":343,"diffs":[[1,"        for (let j = 0; j < btnState.length; j++) {\n            if (btnState[j].key == m.key) {\n                btnState[j].value = pressed\n                break\n            }\n        }\n"]]},{"start1":1981,"length1":68,"diffs":[[1,""]]},{"start1":2156,"length1":0,"diffs":[[1,"    \nconsole.log(joyState)\n"]]}]}]},{"timestamp":1764526694340,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":907,"length1":133,"diffs":[[1,"    // for (let i = 0; i < PINSmap.length; i++) {\n    //     const m = PINSmap[i]\n    //     const pressed = pins.digitalReadPin(m.pin) === 0\n"]]},{"start1":1050,"length1":192,"diffs":[[1,"    //     for (let j = 0; j < btnState.length; j++) {\n    //         if (btnState[j].key == m.key) {\n    //             btnState[j].value = pressed\n    //             break\n    //         }\n    //     }\n    // }\n"]]},{"start1":1264,"length1":189,"diffs":[[1,"    for (let btn of btnState)\n    {\n        btn.value = pins.digitalReadPin(PINSmap.find((v, i) => v.key === btn.key).pin) === 0\n"]]}]}]},{"timestamp":1764527021905,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":793,"length1":20,"diffs":[[1,"\n"]]}]}]},{"timestamp":1764527988838,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":793,"length1":1,"diffs":[[1,"radio.sendNumber(0)\n"]]}]}]},{"timestamp":1764528234469,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":127,"diffs":[[1,""]]},{"start1":2441,"length1":686,"diffs":[[1,"})"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":242,"length1":42,"diffs":[[1,"        \"types.ts\"\n"]]}]},{"type":"added","filename":"receiver.ts","value":"radio.onReceivedNumber(function (n: number) {\n    let buttonsMask = n & 0b1111111      // bity 0–6\n    let dir = (n >> 7) & 0b111           // bity 7–9\n    let strength = (n >> 10) & 0b1111111 // bity 10–16\n    let deg = (n >> 17) & 0b111111111    // bity 17–25\n\n    // zpět do struktur:\n    for (let i = 0; i < btnState.length; i++) {\n        btnState[i].value = (buttonsMask & (1 << i)) != 0\n    }\n    joyState.dirArrow = dir\n    joyState.strength = strength\n    joyState.deg = deg\n})\n"}]},{"timestamp":1764528834062,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":2548,"length1":53,"diffs":[[1,""]]}]},{"type":"edited","filename":"receiver.ts","patch":[{"start1":0,"length1":772,"diffs":[[1,""]]},{"start1":263,"length1":0,"diffs":[[1,"    // zpět do struktur:\n"]]},{"start1":487,"length1":3,"diffs":[[1,""]]}]}]},{"timestamp":1764529050926,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":2625,"length1":81,"diffs":[[1,"input.onLogoEvent(TouchButtonEvent.Pressed, () => control.deviceSerialNumber())\n"]]}]}]},{"timestamp":1764530165668,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":2625,"length1":82,"diffs":[[1,"input.onLogoEvent(TouchButtonEvent.Pressed, () => {control.deviceSerialNumber())\n"]]}]}]},{"timestamp":1764530167718,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":2625,"length1":100,"diffs":[[1,"input.onLogoEvent(TouchButtonEvent.Pressed, () => {control.deviceSerialNumber()@)\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":38,"diffs":[[1,"    \"name\": \"pxt-ans-make-transmitarrow\",\n"]]},{"start1":291,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"},{"type":"added","filename":"main.blocks","value":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"}]}],"snapshots":[{"timestamp":1764359218387,"editorVersion":"8.0.18","text":{"main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\",\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1764362468003,"editorVersion":"8.0.18","text":{"main.ts":"let pin1: number = 0;\nlet pin2: number = 0;\nconst delta: number = 256;\nconst center = {\n    x: 502,\n    y: 512\n}\n\nbasic.forever(() => {\n    pin1 = pins.analogReadPin(AnalogPin.P1)\n    pin2 = pins.analogReadPin(AnalogPin.P2)\n\n    console.logValue(\"P1\", pin1)\n    console.logValue(\"P2\", pin2)\n\n    if (pin1 < center.y - delta && pin2 > center.x + delta)\n        basic.showArrow(ArrowNames.NorthWest, 0)\n    else if (pin1 < center.y - delta && pin2 > center.x - delta)\n        basic.showArrow(ArrowNames.NorthEast, 0)\n    else if (pin1 < center.y - delta && pin2 > center.x - delta)\n        basic.showArrow(ArrowNames.North, 0)\n    else \n        basic.showString(\"-\", 0)\n\n    basic.pause(20)\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764443771125,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 40 * 40\nlet arrow: ArrowNames\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    let dx = center.x - x\n    let dy = center.y - y\n\n    let r2 = dx * dx + dy * dy\n    if (r2 < DEAD_RADIUS) {\n        basic.showString(\"-\", 0)\n        basic.pause(20)\n        return\n    }\n\n    let deg = Math.atan2(dy, dx) * 180 / Math.PI\n    let dir = Math.round(deg / 45)\n    if (dir < 0) {\n        dir += 8\n    }\n    \n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n    basic.pause(20)\n})","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764452424820,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nlet arrow: ArrowNames\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    let dx = center.x - x\n    let dy = center.y - y\n\n    let r2 = dx * dx + dy * dy\n    if (r2 < DEAD_RADIUS) {\n        basic.showString(\"-\", 0)\n        basic.pause(20)\n        return\n    }\n\n    let deg = Math.atan2(dy, dx) * 180 / Math.PI\n    let dir = Math.round(deg / 45)\n    console.log(deg)\n    if (dir < 0) {\n        dir += 8\n    }\n    \n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n    basic.pause(20)\n})","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764509980480,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 502\nlet arrow: ArrowNames\nlet strength: number;\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    let dx = center.x - x\n    let dy = center.y - y\n\n    let r2 = dx * dx + dy * dy\n    if (r2 < DEAD_RADIUS) {\n        basic.showString(\"-\", 0)\n        basic.pause(20)\n        return\n    }\n\n    let r = Math.sqrt(r2)\n    strength = pins.map(r > MAX_RADIUS ? MAX_RADIUS : r, 0, MAX_RADIUS, 0, 100)\n    console.log(strength)\n    let deg = Math.atan2(dy, dx) * 180 / Math.PI\n    let dir = Math.round(deg / 45)\n    \n    if (dir < 0) {\n        dir += 8\n    }\n    \n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n    basic.pause(20)\n})","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764512078782,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 502\nlet arrow: ArrowNames\nlet strength: number;\nconst buttons = {\n    a: false,\n    b: false,\n    c: false,\n    d: false,\n    e: false,\n    f: false,\n    p: false,\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 0\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 0\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 0\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 0\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 0\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 0\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 0\n\n    let dx = center.x - x\n    let dy = center.y - y\n\n    let r2 = dx * dx + dy * dy\n\n    let r = Math.sqrt(r2)\n    strength = pins.map(r > MAX_RADIUS ? MAX_RADIUS : r, 0, MAX_RADIUS, 0, 100)\n    console.log(strength)\n    let deg = Math.atan2(dy, dx) * 180 / Math.PI\n    let dir = Math.round(deg / 45)\n    \n    if (dir < 0) {\n        dir += 8\n    }\n\n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n\n    if (buttons.p) basic.showString(\"P\"); else\n    if (buttons.f) basic.showString(\"F\"); else\n    if (buttons.e) basic.showString(\"E\"); else\n    if (buttons.d) basic.showString(\"D\"); else\n    if (buttons.c) basic.showString(\"C\"); else\n    if (buttons.b) basic.showString(\"B\"); else\n    if (buttons.a) basic.showString(\"A\"); else\n    if (r2 < DEAD_RADIUS) {\n         basic.showString(\"-\", 0)\n         basic.pause(20)\n         return\n    }\n\n    basic.pause(20)\n})","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764513922406,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 730\nlet arrow: ArrowNames\nlet strength: number;\nconst buttons = {\n    a: false,\n    b: false,\n    c: false,\n    d: false,\n    e: false,\n    f: false,\n    p: false,\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 0\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 0\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 0\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 0\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 0\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 0\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 0\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    let dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n\n    strength = pins.map(Math.sqrt(r2) > MAX_RADIUS ? MAX_RADIUS : Math.sqrt(r2), 0, MAX_RADIUS, 0, 100)\n    console.log(Math.sqrt(r2))\n\n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n\n    if (buttons.p) basic.showString(\"P\"); else\n    if (buttons.f) basic.showString(\"F\"); else\n    if (buttons.e) basic.showString(\"E\"); else\n    if (buttons.d) basic.showString(\"D\"); else\n    if (buttons.c) basic.showString(\"C\"); else\n    if (buttons.b) basic.showString(\"B\"); else\n    if (buttons.a) basic.showString(\"A\"); else\n    if (r2 < DEAD_RADIUS) {\n         basic.showString(\"-\", 0)\n         basic.pause(20)\n         return\n    }\n\n    basic.pause(20)\n})","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764517232381,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 512\nlet arrow: ArrowNames\nlet strength: number;\nconst buttons = {\n    a: false,\n    b: false,\n    c: false,\n    d: false,\n    e: false,\n    f: false,\n    p: false,\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 0\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 0\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 0\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 0\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 0\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 0\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 0\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    let dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n\n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n    console.log(strength)\n\n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n\n    if (buttons.p) basic.showString(\"P\"); else\n    if (buttons.f) basic.showString(\"F\"); else\n    if (buttons.e) basic.showString(\"E\"); else\n    if (buttons.d) basic.showString(\"D\"); else\n    if (buttons.c) basic.showString(\"C\"); else\n    if (buttons.b) basic.showString(\"B\"); else\n    if (buttons.a) basic.showString(\"A\"); else\n    if (r2 < DEAD_RADIUS) {\n         basic.showString(\"-\", 0)\n         basic.pause(20)\n         return\n    }\n\n    basic.pause(20)\n})","README.md":"","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764519198104,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 512\nlet arrow: ArrowNames\nlet strength: number;\nconst buttons = {\n    a: false,\n    b: false,\n    c: false,\n    d: false,\n    e: false,\n    f: false,\n    p: false,\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 0\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 0\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 0\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 0\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 0\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 0\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 0\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    let dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n\n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n    console.log(strength)\n        \n    switch (dir) {\n        case 0: arrow = ArrowNames.East; break\n        case 1: arrow = ArrowNames.NorthEast; break\n        case 2: arrow = ArrowNames.North; break\n        case 3: arrow = ArrowNames.NorthWest; break\n        case 4: arrow = ArrowNames.West; break\n        case 5: arrow = ArrowNames.SouthWest; break\n        case 6: arrow = ArrowNames.South; break\n        case 7: arrow = ArrowNames.SouthEast; break\n    }\n\n    basic.showArrow(arrow, 0)\n\n    if (buttons.p) basic.showString(\"P\"); else\n    if (buttons.f) basic.showString(\"F\"); else\n    if (buttons.e) basic.showString(\"E\"); else\n    if (buttons.d) basic.showString(\"D\"); else\n    if (buttons.c) basic.showString(\"C\"); else\n    if (buttons.b) basic.showString(\"B\"); else\n    if (buttons.a) basic.showString(\"A\"); else\n    if (r2 < DEAD_RADIUS) {\n         basic.showString(\"-\", 0)\n         basic.pause(20)\n         return\n    }\n\n    basic.pause(20)\n})","README.md":"","letters.ts":"\nfunction getLetter(ch: string): Image {\n    let result: Image = images.createImage(`\n        . . . . .\n        . . . . .\n        . . . . .\n        . . . . .\n        . . . . .\n        `)\n\n    switch (ch.charAt(0).toUpperCase()) {\n        case \"A\":\n            result = images.createImage(`\n                . # # # .\n                # . . . #\n                # # # # #\n                # . . . #\n                # . . . #\n                `)\n            break;\n        case \"B\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # # # . .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"C\":\n            result = images.createImage(`\n                . # # # .\n                # . . . .\n                # . . . .\n                # . . . .\n                . # # # .\n                `)\n            break;\n        case \"D\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # . . # .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"E\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # # # # #\n                `)\n            break;\n        case \"F\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n        case \"P\":\n            result = images.createImage(`\n                # # # # .\n                # . . . #\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n    }\n\n    const arrNo: number = ch.charCodeAt(0) - 48\n    if (arrNo >= 0 && arrNo <= 7) result = images.arrowImage(arrNo);\n    \n    return result;\n}","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"letters.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764521004018,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: pins.analogReadPin(AnalogPin.P2), y: pins.analogReadPin(AnalogPin.P1)} //{ x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 512\nconst PINSmap = [\n    { ch: \"A\", pin: DigitalPin.P5 },\n    { ch: \"B\", pin: DigitalPin.P11 },\n    { ch: \"C\", pin: DigitalPin.P15 },\n    { ch: \"D\", pin: DigitalPin.P14 },\n    { ch: \"E\", pin: DigitalPin.P13 },\n    { ch: \"F\", pin: DigitalPin.P12 },\n    { ch: \"P\", pin: DigitalPin.P8 }\n]\nlet dir: number = 0;\nlet strength: number;\n\nconst buttons = {\n    a: false,\n    b: false,\n    c: false,\n    d: false,\n    e: false,\n    f: false,\n    p: false,\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    buttons.a = pins.digitalReadPin(DigitalPin.P5) === 0\n    buttons.b = pins.digitalReadPin(DigitalPin.P11) === 0\n    buttons.c = pins.digitalReadPin(DigitalPin.P15) === 0\n    buttons.d = pins.digitalReadPin(DigitalPin.P14) === 0\n    buttons.e = pins.digitalReadPin(DigitalPin.P13) === 0\n    buttons.f = pins.digitalReadPin(DigitalPin.P12) === 0\n    buttons.p = pins.digitalReadPin(DigitalPin.P8) === 0\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n    dir = [2, 1, 0, 7, 6, 5, 4, 3][dir]; //remap to ArrowNames\n\n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n\n    basic.showArrow(dir, 0)\n\n    if (buttons.p) basic.showString(\"P\"); else\n    if (buttons.f) basic.showString(\"F\"); else\n    if (buttons.e) basic.showString(\"E\"); else\n    if (buttons.d) basic.showString(\"D\"); else\n    if (buttons.c) basic.showString(\"C\"); else\n    if (buttons.b) basic.showString(\"B\"); else\n    if (buttons.a) basic.showString(\"A\"); else\n    if (strength < 3 /*r2 < DEAD_RADIUS*/) {\n         basic.showString(\"-\", 0)\n         basic.pause(20)\n         return\n    }\n\n    basic.pause(20)\n})","README.md":"","letters.ts":"\nfunction getLetter(ch: string): Image {\n    let result: Image = images.createImage(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `)\n\n    switch (ch.charAt(0).toUpperCase()) {\n        case \"A\":\n            result = images.createImage(`\n                . # # # .\n                # . . . #\n                # # # # #\n                # . . . #\n                # . . . #\n                `)\n            break;\n        case \"B\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # # # . .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"C\":\n            result = images.createImage(`\n                . # # # .\n                # . . . .\n                # . . . .\n                # . . . .\n                . # # # .\n                `)\n            break;\n        case \"D\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # . . # .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"E\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # # # # #\n                `)\n            break;\n        case \"F\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n        case \"P\":\n            result = images.createImage(`\n                # # # # .\n                # . . . #\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n    }\n\n    const arrNo: number = ch.charCodeAt(0) - 48\n    if (arrNo >= 0 && arrNo <= 7) result = images.arrowImage(arrNo);\n    \n    return result;\n}","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"letters.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764523478694,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: pins.analogReadPin(AnalogPin.P2), y: pins.analogReadPin(AnalogPin.P1)} //{ x: 502, y: 512 }\nconst DEAD_RADIUS = 20 * 20\nconst MAX_RADIUS = 512\nconst PINSmap = [\n    { key: \"A\", pin: DigitalPin.P5 },\n    { key: \"B\", pin: DigitalPin.P11 },\n    { key: \"C\", pin: DigitalPin.P15 },\n    { key: \"D\", pin: DigitalPin.P14 },\n    { key: \"E\", pin: DigitalPin.P13 },\n    { key: \"F\", pin: DigitalPin.P12 },\n    { key: \"P\", pin: DigitalPin.P8 }\n]\nconst btnState = [\n    { key: \"A\", value: false },\n    { key: \"B\", value: false },\n    { key: \"C\", value: false },\n    { key: \"D\", value: false },\n    { key: \"E\", value: false },\n    { key: \"F\", value: false },\n    { key: \"P\", value: false }\n]\nconst joyState = [\n    { key: \"dirArrow\", value: 0 },\n    { key: \"strength\", value: 0 },\n    { key: \"deg\", value: 90 }\n]\nlet dir: number = 0;\nlet strength: number;\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    for (let i = 0; i < PINSmap.length; i++) {\n        const m = PINSmap[i]\n        const pressed = pins.digitalReadPin(m.pin) === 0\n\n        for (let j = 0; j < btnState.length; j++) {\n            if (btnState[j].key == m.key) {\n                btnState[j].value = pressed\n                break\n            }\n        }\n    }\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n    dir = [2, 1, 0, 7, 6, 5, 4, 3][dir]; //remap to ArrowNames\n\n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n\n    basic.showArrow(dir, 0)\n    for (let btn of btnState) {\n        if (btn.value) basic.showLeds(getLetter(btn.key))\n    }\n    if (strength < 3 /*r2 < DEAD_RADIUS*/) {\n         basic.showString(\"-\", 0)\n         basic.pause(20)\n         return\n    }\n\n    basic.pause(20)\n})","README.md":"","letters.ts":"\nfunction getLetter(ch: string): Image {\n    let result: Image = images.createImage(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `)\n\n    switch (ch.charAt(0).toUpperCase()) {\n        case \"A\":\n            result = images.createImage(`\n                . # # # .\n                # . . . #\n                # # # # #\n                # . . . #\n                # . . . #\n                `)\n            break;\n        case \"B\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # # # . .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"C\":\n            result = images.createImage(`\n                . # # # .\n                # . . . .\n                # . . . .\n                # . . . .\n                . # # # .\n                `)\n            break;\n        case \"D\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # . . # .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"E\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # # # # #\n                `)\n            break;\n        case \"F\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n        case \"P\":\n            result = images.createImage(`\n                # # # # .\n                # . . . #\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n    }\n\n    const arrNo: number = ch.charCodeAt(0) - 48\n    if (arrNo >= 0 && arrNo <= 7) result = images.arrowImage(arrNo);\n    \n    return result;\n}","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"letters.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764525459304,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: pins.analogReadPin(AnalogPin.P2), y: pins.analogReadPin(AnalogPin.P1)} //{ x: 502, y: 512 }\nconst MAX_RADIUS = 512\nconst PINSmap: Array<PinMapItem> = [\n    { key: \"A\", pin: DigitalPin.P5 },\n    { key: \"B\", pin: DigitalPin.P11 },\n    { key: \"C\", pin: DigitalPin.P15 },\n    { key: \"D\", pin: DigitalPin.P14 },\n    { key: \"E\", pin: DigitalPin.P13 },\n    { key: \"F\", pin: DigitalPin.P12 },\n    { key: \"P\", pin: DigitalPin.P8 }\n]\nconst btnState: Array<ButtonStateItem> = [\n    { key: \"A\", value: false },\n    { key: \"B\", value: false },\n    { key: \"C\", value: false },\n    { key: \"D\", value: false },\n    { key: \"E\", value: false },\n    { key: \"F\", value: false },\n    { key: \"P\", value: false }\n]\nconst joyState: JoyStateItem = { \n    dirArrow: 0,\n    strength: 0,\n    deg: 90\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    for (let i = 0; i < PINSmap.length; i++) {\n        const m = PINSmap[i]\n        const pressed = pins.digitalReadPin(m.pin) === 0\n\n        for (let j = 0; j < btnState.length; j++) {\n            if (btnState[j].key == m.key) {\n                btnState[j].value = pressed\n                break\n            }\n        }\n    }\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    let dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n \n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    joyState.strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n    joyState.dirArrow = [2, 1, 0, 7, 6, 5, 4, 3][dir]; //remap to ArrowNames;\n    joyState.deg = Math.round(rad * 180 / Math.PI)\n\n    let imageToShow: Image = getImage(\"-\");\n    if (joyState.strength > 3) {\n        imageToShow = getImage(joyState.dirArrow.toString())\n    }\n    for (let btn of btnState) {\n        if (btn.value) {\n            imageToShow = getImage(btn.key)\n            break;\n        }\n    }\n    imageToShow.showImage(0, 0);\n    \nconsole.log(joyState)\n\n    basic.pause(20)\n})","README.md":"","letters.ts":"\nfunction getImage(ch: string): Image {\n    let result: Image = images.createImage(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `)\n\n    switch (ch.charAt(0).toUpperCase()) {\n        case \"A\":\n            result = images.createImage(`\n                . # # # .\n                # . . . #\n                # # # # #\n                # . . . #\n                # . . . #\n                `)\n            break;\n        case \"B\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # # # . .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"C\":\n            result = images.createImage(`\n                . # # # .\n                # . . . .\n                # . . . .\n                # . . . .\n                . # # # .\n                `)\n            break;\n        case \"D\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # . . # .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"E\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # # # # #\n                `)\n            break;\n        case \"F\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n        case \"P\":\n            result = images.createImage(`\n                # # # # .\n                # . . . #\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n    }\n\n    const arrNo: number = ch.charCodeAt(0) - 48\n    if (arrNo >= 0 && arrNo <= 7) result = images.arrowImage(arrNo);\n    \n    return result;\n}","types.ts":"type ButtonKey = \"A\" | \"B\" | \"C\" | \"D\" | \"E\" | \"F\" | \"P\"\n\ndeclare type PinMapItem = {\n    key: ButtonKey\n    pin: DigitalPin\n}\n\ndeclare type ButtonStateItem = {\n    key: ButtonKey\n    value: boolean\n}\n\ndeclare type JoyStateItem = {\n    dirArrow: number,\n    strength: number,\n    deg: number\n}","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"letters.ts\",\n        \"types.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764527988838,"editorVersion":"8.0.18","text":{"main.ts":"const center = { x: pins.analogReadPin(AnalogPin.P2), y: pins.analogReadPin(AnalogPin.P1)} //{ x: 502, y: 512 }\nconst MAX_RADIUS = 512\nconst PINSmap: Array<PinMapItem> = [\n    { key: \"A\", pin: DigitalPin.P5 },\n    { key: \"B\", pin: DigitalPin.P11 },\n    { key: \"C\", pin: DigitalPin.P15 },\n    { key: \"D\", pin: DigitalPin.P14 },\n    { key: \"E\", pin: DigitalPin.P13 },\n    { key: \"F\", pin: DigitalPin.P12 },\n    { key: \"P\", pin: DigitalPin.P8 }\n]\nconst btnState: Array<ButtonStateItem> = [\n    { key: \"A\", value: false },\n    { key: \"B\", value: false },\n    { key: \"C\", value: false },\n    { key: \"D\", value: false },\n    { key: \"E\", value: false },\n    { key: \"F\", value: false },\n    { key: \"P\", value: false }\n]\nconst joyState: JoyStateItem = { \n    dirArrow: 0,\n    strength: 0,\n    deg: 0\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    for (let i = 0; i < PINSmap.length; i++) {\n        const m = PINSmap[i]\n        const pressed = pins.digitalReadPin(m.pin) === 0\n\n        for (let j = 0; j < btnState.length; j++) {\n            if (btnState[j].key == m.key) {\n                btnState[j].value = pressed\n                break\n            }\n        }\n    }\n\n    for (let btn of btnState) {\n        const mapping = PINSmap.find(v => v.key === btn.key)\n        if (mapping) {\n            btn.value = pins.digitalReadPin(mapping.pin) === 0\n        }\n    }\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    let dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n \n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    joyState.strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n    joyState.dirArrow = [2, 1, 0, 7, 6, 5, 4, 3][dir]; //remap to ArrowNames;\n    let deg = Math.round(rad * 180 / Math.PI)\n    joyState.deg = deg < 0 ? (450 - (deg + 360)) % 360 : (450 - deg) % 360\n\n    let imageToShow: Image = getImage(\"-\");\n    if (joyState.strength > 3) {\n        imageToShow = getImage(joyState.dirArrow.toString())\n    } else {\n        joyState.dirArrow = 0\n        joyState.deg = 0\n    }\n    for (let btn of btnState) {\n        if (btn.value) {\n            imageToShow = getImage(btn.key)\n            break;\n        }\n    }\n    imageToShow.showImage(0, 0);\n\n    basic.pause(20)\n})","README.md":"","letters.ts":"\nfunction getImage(ch: string): Image {\n    let result: Image = images.createImage(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `)\n\n    switch (ch.charAt(0).toUpperCase()) {\n        case \"A\":\n            result = images.createImage(`\n                . # # # .\n                # . . . #\n                # # # # #\n                # . . . #\n                # . . . #\n                `)\n            break;\n        case \"B\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # # # . .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"C\":\n            result = images.createImage(`\n                . # # # .\n                # . . . .\n                # . . . .\n                # . . . .\n                . # # # .\n                `)\n            break;\n        case \"D\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # . . # .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"E\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # # # # #\n                `)\n            break;\n        case \"F\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n        case \"P\":\n            result = images.createImage(`\n                # # # # .\n                # . . . #\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n    }\n\n    const arrNo: number = ch.charCodeAt(0) - 48\n    if (arrNo >= 0 && arrNo <= 7) result = images.arrowImage(arrNo);\n    \n    return result;\n}","types.ts":"type ButtonKey = \"A\" | \"B\" | \"C\" | \"D\" | \"E\" | \"F\" | \"P\"\n\ndeclare type PinMapItem = {\n    key: ButtonKey\n    pin: DigitalPin\n}\n\ndeclare type ButtonStateItem = {\n    key: ButtonKey\n    value: boolean\n}\n\ndeclare type JoyStateItem = {\n    dirArrow: number,\n    strength: number,\n    deg: number\n}","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"letters.ts\",\n        \"types.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}},{"timestamp":1764530165668,"editorVersion":"8.0.18","text":{"main.ts":"//nastavit stejný radiogrp a band na TX i RX\nradio.setGroup(1)\nradio.setFrequencyBand(40)\nradio.setTransmitSerialNumber(true)\n\nconst center = { x: pins.analogReadPin(AnalogPin.P2), y: pins.analogReadPin(AnalogPin.P1)} //{ x: 502, y: 512 }\nconst MAX_RADIUS = 512\nconst PINSmap: Array<PinMapItem> = [\n    { key: \"A\", pin: DigitalPin.P5 },\n    { key: \"B\", pin: DigitalPin.P11 },\n    { key: \"C\", pin: DigitalPin.P15 },\n    { key: \"D\", pin: DigitalPin.P14 },\n    { key: \"E\", pin: DigitalPin.P13 },\n    { key: \"F\", pin: DigitalPin.P12 },\n    { key: \"P\", pin: DigitalPin.P8 }\n]\nconst btnState: Array<ButtonStateItem> = [\n    { key: \"A\", value: false },\n    { key: \"B\", value: false },\n    { key: \"C\", value: false },\n    { key: \"D\", value: false },\n    { key: \"E\", value: false },\n    { key: \"F\", value: false },\n    { key: \"P\", value: false }\n]\nconst joyState: JoyStateItem = { \n    dirArrow: 0,\n    strength: 0,\n    deg: 0\n}\n\nbasic.forever(() => {\n    let x = pins.analogReadPin(AnalogPin.P2)\n    let y = pins.analogReadPin(AnalogPin.P1)\n\n    for (let i = 0; i < PINSmap.length; i++) {\n        const m = PINSmap[i]\n        const pressed = pins.digitalReadPin(m.pin) === 0\n\n        for (let j = 0; j < btnState.length; j++) {\n            if (btnState[j].key == m.key) {\n                btnState[j].value = pressed\n                break\n            }\n        }\n    }\n\n    for (let btn of btnState) {\n        const mapping = PINSmap.find(v => v.key === btn.key)\n        if (mapping) {\n            btn.value = pins.digitalReadPin(mapping.pin) === 0\n        }\n    }\n\n    let dx = center.x - x\n    let dy = center.y - y\n    let r2 = dx * dx + dy * dy\n\n    let rad = Math.atan2(dy, dx)\n    if (rad < 0) rad += 2 * Math.PI\n\n    let dir = Math.round(rad * 180 / Math.PI / 45)\n    if (dir >= 8) dir -= 8\n \n    let squareMag = Math.max(Math.abs(dx), Math.abs(dy))\n    joyState.strength = Math.round(pins.map(squareMag > MAX_RADIUS ? MAX_RADIUS : squareMag, 0, MAX_RADIUS, 0, 100));\n    joyState.dirArrow = [2, 1, 0, 7, 6, 5, 4, 3][dir]; //remap to ArrowNames;\n    let deg = Math.round(rad * 180 / Math.PI)\n    joyState.deg = deg < 0 ? (450 - (deg + 360)) % 360 : (450 - deg) % 360\n\n    let imageToShow: Image = getImage(\"-\");\n    if (joyState.strength > 3) {\n        imageToShow = getImage(joyState.dirArrow.toString())\n    } else {\n        joyState.dirArrow = 0\n        joyState.deg = 0\n    }\n    for (let btn of btnState) {\n        if (btn.value) {\n            imageToShow = getImage(btn.key)\n            break;\n        }\n    }\n    imageToShow.showImage(0, 0);\n\n    radio.sendNumber(packState(joyState, btnState))\n\n    basic.pause(20)\n})\n\ninput.onLogoEvent(TouchButtonEvent.Pressed, () => control.deviceSerialNumber())\n\nfunction packState(joy: JoyStateItem, btns: Array<ButtonStateItem>): number {\n    let buttonsMask = 0\n    for (let i = 0; i < btns.length; i++) {\n        if (btns[i].value) {\n            buttonsMask |= (1 << i) // A=bit0, B=bit1, ...\n        }\n    }\n\n    const dir = joy.dirArrow & 0b111          // 3 bity\n    const strength = joy.strength & 0b1111111 // 7 bitů\n    const deg = joy.deg & 0b111111111         // 9 bitů\n\n    return (\n        (buttonsMask) |    // bity 0–6\n        (dir << 7) |       // bity 7–9\n        (strength << 10) | // bity 10–16\n        (deg << 17)        // bity 17–25\n    )\n}\n","README.md":"","letters.ts":"\nfunction getImage(ch: string): Image {\n    let result: Image = images.createImage(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `)\n\n    switch (ch.charAt(0).toUpperCase()) {\n        case \"A\":\n            result = images.createImage(`\n                . # # # .\n                # . . . #\n                # # # # #\n                # . . . #\n                # . . . #\n                `)\n            break;\n        case \"B\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # # # . .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"C\":\n            result = images.createImage(`\n                . # # # .\n                # . . . .\n                # . . . .\n                # . . . .\n                . # # # .\n                `)\n            break;\n        case \"D\":\n            result = images.createImage(`\n                # # # . .\n                # . . # .\n                # . . # .\n                # . . # .\n                # # # . .\n                `)\n            break;\n        case \"E\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # # # # #\n                `)\n            break;\n        case \"F\":\n            result = images.createImage(`\n                # # # # #\n                # . . . .\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n        case \"P\":\n            result = images.createImage(`\n                # # # # .\n                # . . . #\n                # # # # .\n                # . . . .\n                # . . . .\n                `)\n            break;\n    }\n\n    const arrNo: number = ch.charCodeAt(0) - 48\n    if (arrNo >= 0 && arrNo <= 7) result = images.arrowImage(arrNo);\n    \n    return result;\n}","types.ts":"type ButtonKey = \"A\" | \"B\" | \"C\" | \"D\" | \"E\" | \"F\" | \"P\"\n\ndeclare type PinMapItem = {\n    key: ButtonKey\n    pin: DigitalPin\n}\n\ndeclare type ButtonStateItem = {\n    key: ButtonKey\n    value: boolean\n}\n\ndeclare type JoyStateItem = {\n    dirArrow: number,\n    strength: number,\n    deg: number\n}","receiver.ts":"/*\n\n//nastavit stejný radiogrp a band na TX i RX\nradio.setGroup(1)\nradio.setFrequencyBand(40)\nradio.setTransmitSerialNumber(true)\n\ntype ButtonKey = \"A\" | \"B\" | \"C\" | \"D\" | \"E\" | \"F\" | \"P\"\ndeclare type PinMapItem = {\n    key: ButtonKey\n    pin: DigitalPin\n}\ndeclare type ButtonStateItem = {\n    key: ButtonKey\n    value: boolean\n}\ndeclare type JoyStateItem = {\n    dirArrow: number,\n    strength: number,\n    deg: number\n}\n\nconst btnState: Array<ButtonStateItem> = [\n    { key: \"A\", value: false },\n    { key: \"B\", value: false },\n    { key: \"C\", value: false },\n    { key: \"D\", value: false },\n    { key: \"E\", value: false },\n    { key: \"F\", value: false },\n    { key: \"P\", value: false }\n]\nconst joyState: JoyStateItem = {\n    dirArrow: 0,\n    strength: 0,\n    deg: 0\n}\n\nradio.onReceivedNumber(function (n: number) {\n    let buttonsMask = n & 0b1111111      // bity 0–6\n    let dir = (n >> 7) & 0b111           // bity 7–9\n    let strength = (n >> 10) & 0b1111111 // bity 10–16\n    let deg = (n >> 17) & 0b111111111    // bity 17–25\n\n    for (let i = 0; i < btnState.length; i++) {\n        btnState[i].value = (buttonsMask & (1 << i)) != 0\n    }\n    joyState.dirArrow = dir\n    joyState.strength = strength\n    joyState.deg = deg\n})\n\n*/","pxt.json":"{\n    \"name\": \"pxt-ans-make-transmitarrow\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.ts\",\n        \"README.md\",\n        \"letters.ts\",\n        \"types.ts\",\n        \"receiver.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"languageRestriction\": \"javascript-only\"\n}\n"}}],"shares":[],"lastSaveTime":1764530377405}